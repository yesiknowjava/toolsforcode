<script>

    function set_result(result) {
        document.getElementById("result_data").innerHTML = result[0]["encoded"]
    }
    function call_server() {

        text_data = "Hare Krishna Hare Krishna Krishna Krishna Hare Hare. Hare Rama Hare Rama Rama Rama Hare Hare"
        text_data = document.getElementById("raw_input").value

        // Define the string
        var decodedStringBtoA = text_data;

        // Encode the String
        var encodedStringBtoA = btoa(decodedStringBtoA);

        if (encodedStringBtoA) {
            console.log("Javascript based encode")
            set_result(result)
        } else {
            console.log("backend based encode")
            var myHeaders = new Headers();
            var raw = JSON.stringify([{
            "source_string": text_data
            }]);

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("https://5f4dlh7trgjlw4nfqlplfib4xa0izcpv.lambda-url.us-east-2.on.aws/?mydata=krishna", requestOptions)
            .then(response => response.text())
            .then(result => set_result(result))
            .catch(error => console.log('error', error));
        
        }
        
    }
</script>